---
name: Chrome 扩展最佳实践
description: Chrome 扩展开发的安全性、权限和 UX 检查清单
---
# Chrome 扩展最佳实践 Skill

## 触发条件
- 用户说 "检查扩展最佳实践"
- 用户运行 `/check-extension`
- 项目即将提交到 Chrome Web Store 之前

## 检查清单

### 🔒 安全性 (必须通过)

#### 1. 权限最小化
- [ ] 只请求**绝对必要**的权限
- [ ] 优先使用 `activeTab` 而非 `tabs` (按需访问)
- [ ] 避免 `<all_urls>` 除非真的需要访问所有网站

**常见权限及其用途:**
| 权限 | 用途 | 风险等级 |
|------|------|---------|
| `activeTab` | 访问当前标签页 | 低 |
| `scripting` | 注入脚本 | 中 |
| `storage` | 本地存储 | 低 |
| `tabs` | 读取所有标签页信息 | 高 |

#### 2. API Key 保护
- [ ] **绝不**在前端代码中硬编码 API Key
- [ ] 使用以下方案之一:
  - 让用户提供自己的 Key
  - 通过后端服务器代理 API 调用
  - 从安全服务器获取 Key

#### 3. 代码来源
- [ ] 所有代码必须打包在扩展内
- [ ] **禁止**运行时远程加载 JavaScript

#### 4. 输入验证
- [ ] 所有外部数据必须经过验证和清理
- [ ] 使用 DOM 操作时防范 XSS

---

### ⚡ 性能

#### 1. 资源效率
- [ ] 内容脚本只在必要的页面注入
- [ ] 使用 `matches` 精确定义注入范围
- [ ] 避免在所有页面运行后台监听

#### 2. 启动速度
- [ ] 首次渲染内容应在 100ms 内完成
- [ ] 大型资源延迟加载

---

### 🎨 用户体验 (UX)

#### 1. 清晰的目的
- [ ] 扩展只做**一件事**，且做好
- [ ] 用户能在 5 秒内理解扩展的作用

#### 2. 界面设计
- [ ] 使用清晰、简洁的图标
- [ ] 弹出窗口信息不过载
- [ ] 提供必要的帮助/说明文字

#### 3. 用户控制
- [ ] 允许用户自定义功能 (如果适用)
- [ ] 提供选项页面 (`options.html`)

---

### 📦 发布准备

#### 1. 隐私政策
- [ ] 如果收集任何数据，必须有隐私政策
- [ ] 清晰说明数据如何被使用

#### 2. 商店元数据
- [ ] 准备 128x128 图标
- [ ] 准备 1280x800 或 640x400 截图
- [ ] 撰写清晰的描述和功能列表

#### 3. 测试
- [ ] 在 Chrome Stable 测试
- [ ] 在 Chrome Canary 测试 (预览未来兼容性)

## 参考资源
- [Chrome 扩展开发文档](https://developer.chrome.com/docs/extensions/)
- [Chrome Web Store 政策](https://developer.chrome.com/docs/webstore/program-policies/)
